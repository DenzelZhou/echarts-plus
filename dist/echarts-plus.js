!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("echarts"),require("lodash"));else if("function"==typeof define&&define.amd)define(["echarts","lodash"],t);else{var n="object"==typeof exports?t(require("echarts"),require("lodash")):t(e.echarts,e._);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(null==t.coord)return t;var n={},r=u(e,t);n=p.default.merge(n,r.option);var a=r.indexMap||{},i=l(e,t,t.series,a);n.series=i;var s=[];"series"===t.legendTarget?s=p.default.chain(i).map("name").compact().uniq().value():"item"===t.legendTarget&&(s=p.default.chain(i).map("data").flatten().map("name").compact().uniq().value()),s.length>0&&(n.legend={show:!0,data:s});var f=p.default.chain(t.series).map("visions").flatten().filter(function(e){return h.visionsOrder[e.channel]>=2}).value();return f.length>0&&(n.visualMap=o(e,t,f)),n=p.default.merge(n,h.coordOption[t.coord]),n=p.default.merge(n,t.option)}function o(e,t,n){return n.map(function(n){var r,i=p.default.minBy(e,n.field)[n.field],o=p.default.maxBy(e,n.field)[n.field];return h.visualRange[n.channel]&&(r=a({},n.channel,h.visualRange[n.channel])),{min:i,max:o,show:"map"===t.coord,inRange:r,calculable:!0}})}function u(e,t,n){if(!n){var r=u(e,t,"x"),a=u(e,t,"y");return{option:{xAxis:r.axis,yAxis:a.axis},indexMap:p.default.assign(r.indexMap,a.indexMap)}}var i={},o=t.valueTranslator||c,l=(t.option||{},t[n+"Axis"]||[]);p.default.isArray(l)||(l=[l]);var s=p.default.chain(t.series).map("visions").flatten().filter({channel:n}).value();return s.forEach(function(t){var r=t.option&&t.option[n+"AxisIndex"]||0;if(l[r]=l[r]||{type:"x"===n?"category":"value"},"category"===l[r].type){var a=p.default.chain(e).uniqBy(t.field).sortBy(t.field).value(),u=[],s={};a.forEach(function(e,n){s[e[t.field]]=n,u.push(o(t.field,e[t.field],e))}),l[r].data=u,i[t.field]=s}}),{axis:s.length>0?l:null,indexMap:i}}function l(e,t,n,r){var a=t.itemTranslator||f,i=t.valueTranslator||c,o=p.default.chain(n).map(function(n){if(n.generator)return p.default.chain(e).groupBy(n.generator).map(function(e,a){var o={name:i(n.generator,a,e[0])};return p.default.assign(o,n),o.generator=null,l(e,t,[o],r)[0]}).value();var o=p.default.chain(n.visions).filter(function(e){return"name"!==e.channel}).sort(function(e,t){return h.visionsOrder[e.channel]-h.visionsOrder[t.channel]}).value(),u=p.default.find(n.visions,{channel:"name"}),f={};return f.name=n.name||n.option&&n.option.name,f.data=e.map(function(e){var t=o.map(function(t){return r[t.field]?r[t.field][e[t.field]]:e[t.field]}),n=a(e);return null==n&&u&&(n=i(u.field,e[u.field],e)),{name:n||f.name,value:t}}),f.type=n.type||h.seriesType[t.coord],f=p.default.merge(f,n.option),f=p.default.merge(f,s(f.type))}).value();return p.default.flatten(o)}function s(e){return h.seriesOption[e]}function f(e){return e.name||null}function c(e,t,n){return n&&n[e+"__name"]?n[e+"__name"]:t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var d=n(4),p=r(d),h=n(3);e.exports=t.default},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.coordOption={rect:{},map:{}},t.seriesType={rect:"bar",polar:"pie",map:"map"},t.visionsOrder={x:0,y:1,angle:0,symbolSize:2,color:3,name:-1},t.seriesOption={scatter:{},map:{mapType:"china"}},t.visualRange={symbolSize:[10,80]}},function(e,n){e.exports=t},function(e,t,n){"use strict";(function(r){function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),l=a(u),s=n(0),f=a(s),c=function(){function e(t,n){i(this,e),this._data=t,this._option=n,this._echartsOption=null,this.echarts=null}return o(e,[{key:"setData",value:function(e){this._data=e,this.setOption(this._option)}},{key:"setOption",value:function(e){this._option=e,this.echarts&&(this._echartsOption=(0,f.default)(this._data,this._option),this.echarts.setOption(this._echartsOption))}},{key:"renderTo",value:function(e){"string"==typeof e&&(e=document.getElementById(e)),this.echarts=l.default.init(e),this._echartsOption?this.echarts.setOption(this._echartsOption):this.setOption(this._option)}},{key:"getECharts",value:function(){return this.echarts}}],[{key:"buildOption",value:function(e,t){return(0,f.default)(e,t)}}]),e}();r.EChartsPlus=r.EChartsPlus||c,r.echarts=r.echarts||l.default,t.default=c,e.exports=t.default}).call(t,n(1))}])});
//# sourceMappingURL=echarts-plus.js.map