!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("echarts"),require("lodash"));else if("function"==typeof define&&define.amd)define(["echarts","lodash"],t);else{var n="object"==typeof exports?t(require("echarts"),require("lodash")):t(e.echarts,e._);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==t.coord)return t;var n={},r=s(e,t);n=h.default.merge(n,r.option);var i=r.indexMap||{},a=l(e,t,t.series,i);n.series=a;var f=[];"series"===t.legendTarget?f=h.default.chain(a).map("name").compact().uniq().value():"item"===t.legendTarget&&(f=h.default.chain(a).map("data").flatten().map("name").compact().uniq().value()),f.length>0&&(n.legend={show:!0,data:f});var c=h.default.chain(t.series).map("visions").flatten().filter(function(e){return v.visionsOrder[e.channel]>=2}).value();return c.length>0&&(n.visualMap=u(e,t,c)),n=h.default.merge(n,v.coordOption[t.coord]),n=h.default.merge(n,o(t.option))}function o(e){var t=h.default.assign({},e);return t.yAxis&&!h.default.isArray(t.yAxis)&&(t.yAxis=[t.yAxis]),t.xAxis&&!h.default.isArray(t.xAxis)&&(t.xAxis=[t.xAxis]),t}function u(e,t,n){return n.map(function(n){var r,a=h.default.minBy(e,n.field)[n.field],o=h.default.maxBy(e,n.field)[n.field];return v.visualRange[n.channel]&&(r=i({},n.channel,v.visualRange[n.channel])),{min:a,max:o,show:"map"===t.coord,inRange:r,calculable:!0}})}function s(e,t,n){if(!n){var r=s(e,t,"x"),i=s(e,t,"y");return{option:{xAxis:r.axis,yAxis:i.axis},indexMap:h.default.assign(r.indexMap,i.indexMap)}}var a={},o=t.valueTranslator||d,u=t.option&&t.option[n+"Axis"]||[];h.default.isArray(u)||(u=[u]);var l=h.default.chain(t.series).map(function(e){var t=h.default.chain(e.visions).filter({channel:n}).map(function(t){return{option:e.option,field:t.field,channel:t.channel}}).value();return t.length>1&&console.warn("series has more then one x(y)Axis"),t}).flatten().value();return l.forEach(function(t){var r=t.option&&t.option[n+"AxisIndex"]||0;if(u[r]=u[r]||{type:"x"===n?"category":"value"},"category"===u[r].type){var i=h.default.chain(e).uniqBy(t.field).sortBy(t.field).value(),s=[],l={};i.forEach(function(e,n){l[e[t.field]]=n,s.push(o(t.field,e[t.field],e))}),u[r].data=s,a[t.field]=l}}),{axis:l.length>0?u:null,indexMap:a}}function l(e,t,n,r){var i=t.itemTranslator||c,a=t.valueTranslator||d,o=h.default.chain(n).map(function(n){if(n.generator)return h.default.chain(e).groupBy(n.generator).map(function(e,i){var o={name:a(n.generator,i,e[0]),_plus_name:i};return h.default.assign(o,n),o.generator=null,l(e,t,[o],r)[0]}).value();var o=h.default.chain(n.visions).filter(function(e){return"name"!==e.channel}).sort(function(e,t){return v.visionsOrder[e.channel]-v.visionsOrder[t.channel]}).value(),u=h.default.find(n.visions,{channel:"name"}),s={};s.name=n.name||n.option&&n.option.name,s.data=e.map(function(e){var t=o.map(function(t){return r[t.field]?r[t.field][e[t.field]]:e[t.field]}),n=i(e);return null==n&&u&&(n=a(u.field,e[u.field],e)),{name:n||s.name,value:t}}),s.type=n.type||v.seriesType[t.coord];var c=n.option;return"function"==typeof c&&(c=c(n,n._plus_name)),s=h.default.merge(s,c),s=h.default.merge(s,f(s.type))}).value();return h.default.flatten(o)}function f(e){return v.seriesOption[e]}function c(e){return null}function d(e,t,n){return n&&n[e+"__name"]?n[e+"__name"]:t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var p=n(4),h=r(p),v=n(3);e.exports=t.default},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.coordOption={rect:{},map:{}},t.seriesType={rect:"bar",polar:"pie",map:"map"},t.visionsOrder={x:0,y:1,radius:0,angle:1,symbol:2,symbolSize:3,color:4,colorAlpha:5,opacity:6,colorLightness:7,colorSaturation:8,colorHue:9,name:-1},t.seriesOption={scatter:{},map:{mapType:"china"}},t.visualRange={symbolSize:[10,80]}},function(e,n){e.exports=t},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),s=i(u),l=n(0),f=i(l),c=function(){function e(t,n){a(this,e),this._data=t,this._option=n,this._echartsOption=null,this.echarts=null}return o(e,[{key:"setData",value:function(e){return this._data=e,this.setOption(this._option),this}},{key:"setOption",value:function(e){return this._option=e,this.echarts&&(this._echartsOption=(0,f.default)(this._data,this._option),this.echarts.setOption(this._echartsOption)),this}},{key:"renderTo",value:function(e){return"string"==typeof e&&(e=document.getElementById(e)),this.echarts=s.default.init(e),this._echartsOption?this.echarts.setOption(this._echartsOption):this.setOption(this._option),this}},{key:"getECharts",value:function(){return this.echarts}}],[{key:"buildOption",value:function(e,t){return(0,f.default)(e,t)}}]),e}();r.EChartsPlus=r.EChartsPlus||c,r.echarts=r.echarts||s.default,t.default=c,e.exports=t.default}).call(t,n(1))}])});
//# sourceMappingURL=echarts-plus.js.map